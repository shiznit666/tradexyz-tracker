<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Track real-time transactions on trade.xyz - HIP-3 markets including stocks, commodities and forex">
  <meta name="keywords" content="trade.xyz, HIP-3, Hyperliquid, crypto, trading, transactions, AAPL, NVDA, TSLA, GOLD">
  <title>trade.xyz Tracker | Live Transactions</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
    rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">

  <!-- Favicon -->
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“Š</text></svg>">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="container header-content">
      <a href="#" class="logo">
        <div class="logo-icon">XYZ</div>
        <span>trade<span class="text-gradient">.xyz</span> Tracker</span>
      </a>

      <div class="search-container">
        <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2">
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.35-4.35" />
        </svg>
        <input type="text" id="searchInput" class="search-input" data-i18n-placeholder="searchPlaceholder"
          placeholder="Search a market (AAPL, GOLD, EUR...)">
      </div>

      <div class="header-right">
        <div class="connection-status">
          <span class="status-dot"></span>
          <span id="connectionText" data-i18n="disconnected">Disconnected</span>
        </div>

        <!-- Language Switcher -->
        <div class="language-switcher">
          <button class="lang-btn active" data-lang="en" onclick="i18n.setLanguage('en')" title="English">ğŸ‡¬ğŸ‡§</button>
          <button class="lang-btn" data-lang="fr" onclick="i18n.setLanguage('fr')" title="FranÃ§ais">ğŸ‡«ğŸ‡·</button>
        </div>

        <!-- Theme Toggle -->
        <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
          <span class="icon-moon">ğŸŒ™</span>
          <span class="icon-sun">â˜€ï¸</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    <div class="container">
      <!-- Page Header -->
      <div class="page-header">
        <h1 class="page-title" id="pageTitle">Live <span class="text-gradient">Transactions</span></h1>
        <p class="page-subtitle" data-i18n="pageSubtitle">Track all transactions on trade.xyz HIP-3 markets in real-time
        </p>
      </div>

      <!-- Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value text-gradient" id="statMarkets">0</div>
          <div class="stat-label" data-i18n="activeMarkets">Active Markets</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statTrades">0</div>
          <div class="stat-label" data-i18n="recentTrades">Recent Trades</div>
        </div>
        <div class="stat-card">
          <div class="stat-value text-gradient" id="statUniqueTraders">74K+</div>
          <div class="stat-label" data-i18n="uniqueTraders">Unique Traders</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statConnected">No</div>
          <div class="stat-label" data-i18n="webSocket">WebSocket</div>
        </div>
      </div>

      <!-- Main Navigation Tabs -->
      <div class="main-tabs">
        <button class="main-tab active" data-tab="markets">
          ğŸ“ˆ <span data-i18n="tabMarkets">Markets</span>
        </button>
        <button class="main-tab" data-tab="hip3">
          ğŸ”¥ <span data-i18n="tabHip3">HIP-3</span>
        </button>
        <button class="main-tab" data-tab="analytics">
          ğŸ“Š <span data-i18n="tabAnalytics">Analytics</span>
        </button>
        <button class="main-tab" data-tab="wallet">
          ğŸ‘› <span data-i18n="tabWallet">Wallet</span>
        </button>
      </div>

      <!-- Tab Content: Markets -->
      <div id="tab-markets" class="tab-content active">
        <!-- Category Tabs -->
        <div class="category-tabs">
          <button class="category-tab active" data-category="all">ğŸŒ <span data-i18n="all">All</span></button>
          <button class="category-tab" data-category="equities">ğŸ“ˆ <span data-i18n="equities">Stocks</span></button>
          <button class="category-tab" data-category="commodities">ğŸ† <span
              data-i18n="commodities">Commodities</span></button>
          <button class="category-tab" data-category="forex">ğŸ’± <span data-i18n="forex">Forex</span></button>
          <button class="category-tab" data-category="index">ğŸ“Š <span data-i18n="index">Index</span></button>
        </div>

        <!-- Main Layout -->
        <div class="layout-split">
          <!-- Left: Markets Grid -->
          <section>
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">ğŸ“ˆ <span data-i18n="marketsTitle">HIP-3 MARKETS</span></h2>
              </div>
              <div id="marketsGrid" class="grid grid-auto">
                <div class="loading">
                  <div class="spinner"></div>
                </div>
              </div>
            </div>
          </section>

          <!-- Right: Live Trades Feed -->
          <section>
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">âš¡ <span data-i18n="liveTradesTitle">LIVE TRADES</span></h2>
              </div>
              <div id="tradesFeed" class="trades-feed">
                <div class="empty-state">
                  <div class="empty-state-icon">ğŸ“¡</div>
                  <p data-i18n="waitingConnection">Waiting for WebSocket connection...</p>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>

      <!-- Tab Content: HIP-3 Analysis -->
      <div id="tab-hip3" class="tab-content">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">ğŸ”¥ <span data-i18n="hip3Title">HIP-3 MARKETS ANALYSIS</span></h2>
            <span class="badge-dex" id="hip3LastUpdate">Loading...</span>
          </div>

          <!-- HIP-3 Summary Stats -->
          <div class="analytics-stats hip3-stats">
            <div class="analytics-stat">
              <div class="analytics-stat-label" data-i18n="totalVolume24h">Volume 24h</div>
              <div class="analytics-stat-value text-gradient" id="hip3TotalVolume">$0</div>
            </div>
            <div class="analytics-stat">
              <div class="analytics-stat-label" data-i18n="totalOpenInterest">Open Interest</div>
              <div class="analytics-stat-value" id="hip3TotalOI">$0</div>
            </div>
            <div class="analytics-stat">
              <div class="analytics-stat-label" data-i18n="bestPerformer">Best Performer</div>
              <div class="analytics-stat-value text-success" id="hip3BestPerformer">â€”</div>
            </div>
            <div class="analytics-stat">
              <div class="analytics-stat-label" data-i18n="worstPerformer">Worst Performer</div>
              <div class="analytics-stat-value text-danger" id="hip3WorstPerformer">â€”</div>
            </div>
          </div>

          <!-- Filters -->
          <div class="hip3-filters">
            <div class="hip3-filter-group">
              <button class="hip3-filter-btn active" data-hip3-category="all">ğŸŒ All</button>
              <button class="hip3-filter-btn" data-hip3-category="equities">ğŸ“ˆ Stocks</button>
              <button class="hip3-filter-btn" data-hip3-category="commodities">ğŸ† Commodities</button>
              <button class="hip3-filter-btn" data-hip3-category="forex">ğŸ’± Forex</button>
              <button class="hip3-filter-btn" data-hip3-category="index">ğŸ“Š Index</button>
            </div>
            <input type="text" class="hip3-search" id="hip3Search" placeholder="ğŸ” Search markets...">
          </div>

          <!-- HIP-3 Data Table -->
          <div class="hip3-table-container">
            <table class="hip3-table" id="hip3Table">
              <thead>
                <tr>
                  <th data-sort="name" class="sortable">Asset <span class="sort-icon">â†•</span></th>
                  <th data-sort="markPrice" class="sortable text-right">Price <span class="sort-icon">â†•</span></th>
                  <th data-sort="change24h" class="sortable text-right">24h % <span class="sort-icon">â†•</span></th>
                  <th data-sort="funding" class="sortable text-right">Funding <span class="sort-icon">â†•</span></th>
                  <th data-sort="openInterestUsd" class="sortable text-right">Open Interest <span
                      class="sort-icon">â†•</span></th>
                  <th data-sort="volume24h" class="sortable text-right">Volume 24h <span class="sort-icon">â†•</span></th>
                  <th data-sort="premium" class="sortable text-right">Premium <span class="sort-icon">â†•</span></th>
                </tr>
              </thead>
              <tbody id="hip3TableBody">
                <tr>
                  <td colspan="7">
                    <div class="loading">
                      <div class="spinner"></div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>


      <!-- Tab Content: Analytics -->
      <div id="tab-analytics" class="tab-content">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">ğŸ“Š <span data-i18n="analyticsTitle">PER-DEX SYMBOL ANALYTICS</span></h2>
            <span class="badge-dex">Trade[XYZ]</span>
          </div>

          <!-- Analytics Stats -->
          <div class="analytics-stats">
            <div class="analytics-stat">
              <div class="analytics-stat-label" data-i18n="tradingVolume">Trading Volume</div>
              <div class="analytics-stat-value text-gradient" id="chartVolume">$0</div>
            </div>
            <div class="analytics-stat">
              <div class="analytics-stat-label" data-i18n="uniqueTraders">Unique Traders</div>
              <div class="analytics-stat-value" id="chartTraders">0</div>
            </div>
            <div class="analytics-stat">
              <div class="analytics-stat-label" data-i18n="feesCollected">Trading Fees Collected</div>
              <div class="analytics-stat-value text-gradient" id="chartFees">$0</div>
            </div>
            <div class="analytics-stat">
              <div class="analytics-stat-label" data-i18n="liquidations">Liquidations</div>
              <div class="analytics-stat-value" id="chartLiquidations">0</div>
            </div>
          </div>

          <!-- Charts Grid -->
          <div class="charts-grid">
            <div class="chart-container">
              <div class="chart-header">
                <h3 data-i18n="volumeOverTime">Trade[XYZ] Trading Volume Over Time (by Symbol)</h3>
                <div class="chart-toggle">
                  <button class="chart-toggle-btn active">Bar</button>
                </div>
              </div>
              <div class="chart-wrapper">
                <canvas id="volumeChart"></canvas>
              </div>
            </div>

            <div class="chart-container">
              <div class="chart-header">
                <h3 data-i18n="volumeBreakdown">Trade[XYZ] Trading Volume % Breakdown by Symbol</h3>
                <div class="chart-toggle">
                  <button class="chart-toggle-btn active">Area</button>
                </div>
              </div>
              <div class="chart-wrapper">
                <canvas id="breakdownChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Legend -->
          <div id="chartLegend" class="chart-legend"></div>
        </div>
      </div>

      <!-- Tab Content: Wallet -->
      <div id="tab-wallet" class="tab-content">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">ğŸ‘› <span data-i18n="walletSearchTitle">WALLET LOOKUP</span></h2>
          </div>
          <p class="text-secondary" style="margin-bottom: 1rem;" data-i18n="walletSearchDesc">
            Enter an Ethereum wallet address to view transaction history on HIP-3 markets
          </p>
          <form id="walletForm" class="wallet-input-group">
            <input type="text" id="walletInput" class="wallet-input" data-i18n-placeholder="walletPlaceholder"
              placeholder="0x... (wallet address)">
            <button type="submit" class="btn btn-primary">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.35-4.35" />
              </svg>
              <span data-i18n="search">Search</span>
            </button>
          </form>

          <div id="userFills" style="margin-top: 1.5rem;">
            <!-- User fills will appear here -->
          </div>
        </div>
      </div>

      <!-- Footer Info -->
      <footer style="margin-top: 3rem; padding: 2rem 0; text-align: center; border-top: 1px solid var(--border-color);">


        <!-- Referral & Donation Section -->
        <div class="footer-links">
          <a href="https://app.hyperliquid.xyz/join/SHIZ" target="_blank" rel="noopener" class="footer-cta referral">
            ğŸš€ <span data-i18n="joinHyperliquid">Join Hyperliquid</span>
          </a>
          <button class="footer-cta donation" onclick="copyDonation()" title="Click to copy">
            â˜• <span data-i18n="buyMeCoffee">Buy me a coffee</span>
            <span class="donation-address">0x2A7D...0357</span>
          </button>
        </div>

        <p class="text-secondary" style="margin-bottom: 0.5rem; margin-top: 1.5rem;" data-i18n="footerText">
          Real-time data via Hyperliquid API â€¢ HIP-3 markets on trade.xyz
        </p>
        <p class="text-tertiary" style="font-size: 0.875rem;" data-i18n="disclaimer">
          âš ï¸ This site is not affiliated with trade.xyz. For informational purposes only.
        </p>

        <p class="text-tertiary" style="font-size: 0.75rem; margin-top: 1rem;">
          <span data-i18n="madeWith">Made with</span> â¤ï¸ <span data-i18n="by">by</span> SHIZ
        </p>
      </footer>

      <!-- Hidden full donation address for copying -->
      <input type="text" id="donationAddress" value="0x2A7D39431021E4f3D4CbD918878A82C6D4F0e357"
        style="position: absolute; left: -9999px;" readonly>
    </div>
  </main>

  <!-- Scripts - i18n must be loaded first -->
  <script src="js/i18n.js"></script>
  <script src="js/api.js"></script>
  <script src="js/websocket.js"></script>
  <script src="js/components.js"></script>
  <script src="js/charts.js"></script>
  <script src="js/app.js"></script>

  <!-- Initialize language and theme on load -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Update button states based on saved language
      const savedLang = localStorage.getItem('lang') || 'en';
      i18n.setLanguage(savedLang);

      // Initialize theme from localStorage
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    });

    // Copy donation address to clipboard
    function copyDonation() {
      const address = '0x2A7D39431021E4f3D4CbD918878A82C6D4F0e357';
      navigator.clipboard.writeText(address).then(() => {
        Components.showToast(i18n.t('addressCopied'), 'success');
      }).catch(() => {
        // Fallback
        const input = document.getElementById('donationAddress');
        input.select();
        document.execCommand('copy');
        Components.showToast(i18n.t('addressCopied'), 'success');
      });
    }

    // Toggle between light and dark theme
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');

      if (currentTheme === 'light') {
        html.removeAttribute('data-theme');
        localStorage.setItem('theme', 'dark');
      } else {
        html.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
      }
    }
  </script>
</body>

</html>